# D-Bus: A Brief Overview
D-Bus is a peer-to-peer, object-based messaging protocol.
Objects and Paths: Every application using D-Bus has "objects," each with a unique "object path" for identification. To communicate, applications like A and B must connect to D-Bus, obtaining a unique "Bus name".

Objects can have multiple interfaces, enabling a broad or grouped set of functionalities.


# Mechanism
<img src="https://github.com/K0Dahyun/Project-2/assets/119277948/a4ca2926-c28b-4ab3-b452-5ef917ad0b76" width="600" height="400"/>

To enable communication between applications A and B, they first connect to D-Bus, each obtaining a unique "Bus name" for inter-application communication.

Inside Application A resides an object "a" and within Application B is object "b". Each of these objects is identified in D-Bus by a distinct "Object path", which facilitates message routing to or from them.

Both "a" in Application A and "b" in Application B offer one or more "Interfaces" that bundle functionalities as methods and signals. A method acts like a function callable by other objects, while a signal is a message notifying another object of an event.

For object "a" in Application A to message object "b" in Application B, it utilizes "b's" object path and its relevant interface. Similarly, for "b" to message "a", it uses "a's" object path and interface.

Hence, while the Bus Name is used to specify the target process for message dispatch, the Object Path pinpoints the particular object within that process to handle the message.


# QtDbus
- QDBusAbstractAdaptor : This class primarily serves to "link" or "connect" Qt objects to D-Bus. By inheriting and utilizing classes derived from this, specific methods, signals, and properties of a Qt object can be made accessible from D-Bus. In essence, it provides an interface of the object to D-Bus.

- QDBusConnection: This class is responsible for managing D-Bus "connections". It is used for tasks such as registering objects in the D-Bus system or registering D-Bus services. Additionally, it offers functionalities like sending or receiving D-Bus messages.

- QDBusInterface: This class enables the use of the "interface" of objects registered on D-Bus. Through this class, methods can be invoked on remote D-Bus objects or signals can be received from them. In short, it's a class utilized for communicating with other objects in the D-Bus system.

In summary, QDBusAbstractAdaptor exposes the interface of Qt objects to D-Bus, QDBusConnection manages the D-Bus connection itself, and QDBusInterface facilitates communication with connected objects on D-Bus. By effectively leveraging these three classes, one can interact flexibly with the D-Bus system


# How to define Interface(Xml)
A D-Bus interface file is an XML file that describes one or more D-Bus interfaces. It represents the most efficient way to describe the D-Bus API in a machine-readable manner.
[D-Bus API Design Guidelines](https://dbus.freedesktop.org/doc/dbus-api-design.html)


### QtDBus XML Compiler (qdbusxml2cpp)
The QtDBus XML compiler is a tool that can be used to parse interface descriptions and generate static code representing the interface, which can then be utilized to call remote objects or implement the given interface. Reference

The qdbusxml2cpp has two operation modes corresponding to two possible outputs it can generate: interface (or proxy) classes and adaptor classes. The latter consists of C++ header and source files that can be edited and tweaked as necessary.

The qdbusxml2cpp tool isn't designed to run every time you compile an application. Instead, it's intended for use during development or when the interface changes.

Adaptor classes generated by qdbusxml2cpp are essentially skeletons that need to be completed. By default, the adaptor produces calls to slots in the connected object with the same name. However, one can modify these slots or property accessor functions to fit specific needs.

```c
qdbuscpp2xml -o car.xml car.h //header file to xml file (qdbuscpp2xml -o (name).xml (name).h
qdbusxml2cpp -a car_adaptor car.xml //xml file to adaptor 
qdbusxml2cpp -p car_interface car.xml //xml file to interface(Proxy) 
```


# Access Interface
```c
//sender
iface = new QDBusInterface(SERVICE_NAME, OBJECT_PATH, INTERFACE_NAME,
                               QDBusConnection::sessionBus(), this);
//receiver
iface = new QDBusInterface(SERVICE_NAME, OBJECT_PATH, INTERFACE_NAME, QDBusConnection::sessionBus());
```
